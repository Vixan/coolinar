<div class="register">
  <nz-card nz-row nzType="flex" nzJustify="center" nzAlign="middle" class="register__content">
    <div nz-col nzSpan="24">
      <div class="register__header">
        <div nz-row nzType="flex" nzJustify="center">
          <a [routerLink]="['/']"><img src="assets/images/logo.svg" class="register__logo" alt="logo"/></a>
        </div>
        <div nz-row nzType="flex" nzJustify="center" nzAlign="top">
          <h1 class="register__message">Create your new Coolinar account</h1>
        </div>
      </div>
      <div class="register__body">
        <div nz-row nzType="flex" nzJustify="center" nzAlign="top">
          <div nz-col nzSpan="24">
            <form nz-form [formGroup]="registerForm" class="register__form" (ngSubmit)="submitForm()">
              <nz-form-item>
                <nz-form-control>
                  <nz-input-group [nzPrefix]="prefixUser">
                    <input type="text" nz-input formControlName="name" placeholder="Name"
                      (ngModelChange)="updateNameValidator()" />
                  </nz-input-group>
                  <nz-form-explain *ngIf="
                    registerForm.get('name')?.dirty &&
                    registerForm.get('name')?.errors
                  ">
                    <ng-container *ngIf="registerForm.get('name').hasError('required')">
                      Name is required
                    </ng-container>
                    <ng-container *ngIf="registerForm.get('name').hasError('inUse')">
                      Name already in use
                    </ng-container>
                  </nz-form-explain>
                </nz-form-control>
              </nz-form-item>
              <nz-form-item>
                <nz-form-control>
                  <nz-input-group [nzPrefix]="prefixMail">
                    <input type="email" nz-input formControlName="email" placeholder="Email" email
                      (ngModelChange)="updateEmailValidator()" />
                  </nz-input-group>
                  <nz-form-explain *ngIf="
                    registerForm.get('email')?.dirty &&
                    registerForm.get('email')?.errors
                  ">
                    <ng-container *ngIf="registerForm.get('email').hasError('required')">
                      Email is required
                    </ng-container>
                    <ng-container *ngIf="registerForm.get('email').hasError('email')">
                      Email format is invalid
                    </ng-container>
                    <ng-container *ngIf="registerForm.get('email').hasError('inUse')">
                      Email already in use
                    </ng-container>
                  </nz-form-explain>
                </nz-form-control>
              </nz-form-item>
              <nz-form-item>
                <nz-form-control>
                  <nz-input-group [nzPrefix]="prefixLock">
                    <input type="password" nz-input formControlName="password" placeholder="Password" />
                  </nz-input-group>
                  <nz-form-explain *ngIf="
                    registerForm.get('password')?.dirty &&
                    registerForm.get('password')?.errors
                  ">
                    <ng-container *ngIf="registerForm.get('password').hasError('required')">
                      Password is required
                    </ng-container>
                    <ng-container *ngIf="registerForm.get('password').hasError('incorrect')">
                      Password is incorrect
                    </ng-container>
                    <ng-container *ngIf="registerForm.get('password').hasError('minlength')">
                      Password must be at least {{passwordMinLength}} characters long
                    </ng-container>
                  </nz-form-explain>
                </nz-form-control>
              </nz-form-item>
              <nz-form-item>
                <nz-form-control>
                  <button nz-button class="register__button" [nzType]="'primary'">
                    Register
                  </button>
                  Or
                  <a [routerLink]="['/login']">Login</a> if you already have an account
                </nz-form-control>
              </nz-form-item>
            </form>
            <ng-template #prefixUser><i nz-icon type="user"></i></ng-template>
            <ng-template #prefixMail><i nz-icon type="mail"></i></ng-template>
            <ng-template #prefixLock><i nz-icon type="lock"></i></ng-template>
          </div>
        </div>
      </div>
    </div>
  </nz-card>
</div>
